<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.hmc.dao.EventJoinDao">
	
	<resultMap type="com.hmc.vo.EventJoin" id="EventJoinResultMap">
		<result column="event_code" property="eventCode"/>
		<result column="user_id" property="userId"/>
		<result column="event_join_entry_date" property="entryDate"/>
		<result column="event_join_result" property="result"/>
	</resultMap>
	
	<insert id="insertEventJoin" parameterType="com.hmc.vo.EventJoin">
		insert into t_event_join
			(event_code, user_id)
		values
			(#{eventCode}, #{userId})
	</insert>
	
	<update id="updateEventJoinResult" parameterType="com.hmc.vo.EventJoin">
		update t_event_join
		set
    		event_join_result = #{result}
		where 
    		user_id = #{userId}
    	and
    		event_code = #{eventCode}
	</update>
	
	<select id="getEventJoinByUserId" parameterType="string" resultMap="EventJoinResultMap">
		select 
    		*
		from 
   		 	t_event_join
		where 
    		user_id = #{value}
	</select>
	
	<select id="getEventJoinByEventCode" parameterType="string" resultMap="EventJoinResultMap">
		select 
   	 		*
		from 
    		t_event_join
		where 
    		event_code = #{value}
	</select>
</mapper>